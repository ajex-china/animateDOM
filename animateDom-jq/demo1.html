<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>樱花飘落</title>
    <style>
        *{
            padding: 0;
            margin: 0;
        }
    </style>
</head>
<body style="overflow: hidden">
<div id="testDiv">

</div>
<script src="js/jquery-1.11.0.min.js"></script>
<script src="js/AnimateDom.js"></script>
<script>
    var container = AnimateDom.getDom($('#testDiv'));
    var bg =  AnimateDom.newDom("img");
    bg.src =  "images/yinghua/bg.jpg";
    container.addChild(bg);
    var shui = AnimateDom.newDom("img");;
    shui.src =  "images/yinghua/shui.gif";
    shui.y = 841;
    container.addChild(shui);
    var count = 50;
    var yingList = []
    for(var i=0;i < count;i++)
    {
        var ying = AnimateDom.newDom("img");
        var scale = Math.random()*0.5+0.5;
        var speed = (3 + Math.random()*3 )*scale;
        var du = 15 + Math.random()*5;
        ying.src = "images/yinghua/huaban.png";
        ying.scaleX = scale;
        ying.scaleY = scale;
        ying.xNum = Math.sin(Math.PI/180*du)*speed;
        ying.yNum = Math.cos(Math.PI/180*du)*speed;
        ying.x = Math.random()*1920;
        ying.y = Math.random()*900;
        ying.rotation = Math.random()*360;
        // ying.dom.css("-webkit-transform-origin","30px 30px");
        // ying.dom.css("transform-origin","30px 30px");
        container.addChild(ying);
        yingList.push(ying);
    }
    function run()
    {
        for(var i=0;i < yingList.length;i++)
        {
            var ying = yingList[i];
            if(ying.y > 1000||ying.x < -50)
            {
                ying.x = Math.random()*1920;
                ying.y = -50;
            }
            ying.x -= ying.xNum;
            ying.y += ying.yNum;
            ying.rotation +=5;
        }
        requestAnimationFrame(run)
    }
    requestAnimationFrame(run)

</script>
</body>
</html>